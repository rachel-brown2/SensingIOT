# -*- coding: utf-8 -*-
"""
Created on Sat Dec 26 11:35:14 2020

@author: rache
"""

##
 # Maker's Digest
 #
 # MCP3008 ADC Example
 #
 # Dont forget to install the libraries! See README.md for details.
##
import sys                      # Import sys module
from time import sleep          # Import sleep from time
import Adafruit_GPIO.SPI as SPI # Import Adafruit GPIO_SPI Module
import Adafruit_MCP3008         # Import Adafruit_MCP3008

dly = .5         # Delay of 1000ms (1 second)

# Hardware SPI Configuration
SPI_PORT = 0 # Set the SPI Port. Raspi has two.
SPI_DEV  = 0 # Set the SPI Device

# Instantiate the mcp class from Adafruit_MCP3008 module and set it to 'mcp'. 
mcp = Adafruit_MCP3008.MCP3008(spi=SPI.SpiDev(SPI_PORT, SPI_DEV))

# Check to see if we have input from command line. Bail if we dont.
if ( len(sys.argv) <= 1):
    print ("Usage: MCP3008-example.py <Analog Port>")
    sys.exit(1)
else:
    analogPort = int(sys.argv[1])

print ('Reading MCP3008 values on pin: %d')% analogPort

try:
    while True:
        # Read the value from the MCP3008 on the pin we specified in analogPort
        val = mcp.read_adc(analogPort)

        # print out the value
        print (val)

        # Sleep for dly
        sleep(dly)
except KeyboardInterrupt:
    sys.exit()
